---
title: 从0到1搭建React+TS项目1（下）
published: 2025-07-15
description: "我的项目解释2"
image: "./cover.jpg"
tags: ["React ","TS","Webpack","craco"]
category: React+TS项目1
draft: false
---
## 三、核心功能实现：路由、组件与交互

### （一）路由配置
:::tip
这里我的思路是先把一个一个页面制作出来，然后在导出页面组件，最终再将页面组件组合起来，用Swiper实现最终效果，所以我在制作时建了一个Login页面，方便我进行页面调试。但是，在最终呈现效果中我并没有显示Login页面。
:::

使用`react-router-dom`实现页面路由功能：

1. 安装路由依赖（需对应TypeScript类型包）
2. 在`App.tsx`中配置路由结构：

```tsx title="App.tsx"
import { BrowserRouter, Routes, Route } from "react-router-dom";
import Login from "./pages/Login";

const App: React.FC = () => {
  return (
    <BrowserRouter>
      <Routes>
        <Route path="/" element={<Login />} />
      </Routes>
    </BrowserRouter>
  );
};
```

3. 实现页面间跳转：在Login页面使用`Link`组件跳转到Home页面

### （二）公共组件开发

以Header组件为例，实现可复用公共组件：

```tsx
import React, { Component } from "react";
import "./Header.css";

class Header extends Component {
  render() {
    return <div className="M-header">Header</div>;
  }
}

export default Header;
```

在Home和Login页面中引入Header组件，保持页面头部风格统一。

### （三）交互功能实现

#### 1. 弹窗组件

实现基础弹窗组件，支持显示/隐藏控制和内容插槽：

```tsx
import React from "react";
import "./Modal.css";

interface ModalProps {
  isOpen: boolean;
  onClose: () => void;
  children: React.ReactNode;
}

const Modal: React.FC<ModalProps> = ({ isOpen, onClose, children }) => {
  if (!isOpen) return null;

  return (
    <div className="modal-overlay" onClick={onClose}>
      <div className="modal-content" onClick={(e) => e.stopPropagation()}>
        <button onClick={onClose}>X</button>
        {children}
      </div>
    </div>
  );
};

export default Modal;
```

#### 2. 鼠标悬浮交互

利用`useState`钩子管理悬浮状态，实现hover效果：

```tsx
import React, { useState } from "react";

const HoverText: React.FC = () => {
  const [isHovered, setIsHovered] = useState(false);

  return (
    <div>
      <div
        onMouseEnter={() => setIsHovered(true)}
        onMouseLeave={() => setIsHovered(false)}
      >
        悬停在我上面显示文本
      </div>
      {isHovered && <div>这是悬停时显示的文本</div>}
    </div>
  );
};

export default HoverText;
```

### （四）页面轮播实现

基于Swiper实现全屏页面轮播，核心要点包括：

1. 设计slide数据结构：每个slide包含标题、文本、图片等完整内容
2. 关键配置参数：
   - `direction: "vertical"`：实现垂直全屏滚动
   - `mousewheel: true`：支持鼠标滚轮控制
   - `keyboard: true`：支持键盘方向键控制
   - `slidesPerView: 1`：每次显示一个slide
3. 性能优化：采用懒加载、分模块加载和虚拟渲染提升大型轮播性能

## 四、项目优化与部署要点

### （一）开发体验优化

- 启用Webpack热模块替换（HMR），修改代码无需刷新页面即可更新
- 配置Source Map，方便开发阶段调试代码
- 统一代码规范，结合ESLint和Prettier确保代码风格一致

### （二）生产环境优化

- 代码压缩：JS使用TerserPlugin，CSS使用CssMinimizerPlugin
- 资源优化：图片压缩、字体子集化、代码分割
- 缓存策略：为静态资源添加哈希值，实现长效缓存
- Tree Shaking：移除未使用的代码，减小打包体积

### （三）常见问题解决
:::caution
1. **"Target container is not a DOM element"错误**：确保HTML模板中存在正确的`#root`挂载点
2. **样式不生效**：检查loader配置顺序（从右到左执行），确保postcss-loader正确配置
3. **TypeScript资源引入错误**：在`global.d.ts`中声明资源模块类型
4. **开发服务器启动循环**：升级依赖解决webpack-dev-server旧API废弃问题
:::



